services:
  wyoming-openclaw:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: wyoming-openclaw
    restart: unless-stopped
    networks:
      - openclaw-network
    ports:
      - "10600:10600"
    environment:
      GATEWAY_URL: ${GATEWAY_URL}
      GATEWAY_TOKEN: ${GATEWAY_TOKEN}
      SESSION_ID: ${SESSION_ID:-voice-assistant}
      # Home Assistant credentials for direct device control (optional)
      HA_URL: ${HA_URL:-}
      HA_TOKEN: ${HA_TOKEN:-}
      DEBUG: ${DEBUG:-}
    command:
      [
        "python", "wyoming_openclaw.py",
        "--host", "0.0.0.0",
        "--port", "10600",
        "--gateway-url", "${GATEWAY_URL}",
        "--token", "${GATEWAY_TOKEN}",
        "--session-id", "${SESSION_ID:-voice-assistant}",
        "--ha-url", "${HA_URL:-}",
        "--ha-token", "${HA_TOKEN:-}",
      ]

networks:
  openclaw-network:
    name: ${OPENCLAW_NETWORK}
    external: true
